<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Virtual Tour â€“ Pamles Park</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

<style>
html,body{
  margin:0;
  height:100%;
  font-family:'Inter',sans-serif;
  overflow:hidden;
  touch-action:none;
  background:#000;
}

a-scene{
  position:fixed;
  inset:0;
}

/* TOP BAR */
.topbar{
  position:fixed;
  top:14px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  background:rgba(15,23,42,.85);
  backdrop-filter:blur(12px);
  padding:10px;
  border-radius:18px;
  z-index:30;
}

.topbar button{
  border:none;
  padding:10px 14px;
  border-radius:14px;
  background:#0f172a;
  color:#fff;
  font-weight:600;
  font-size:13px;
}

/* INFO */
.info{
  position:fixed;
  top:14px;
  left:14px;
  background:rgba(15,23,42,.82);
  backdrop-filter:blur(12px);
  color:#fff;
  padding:12px 16px;
  border-radius:14px;
  z-index:20;
}

/* NAV */
.nav{
  position:fixed;
  bottom:16px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  background:rgba(15,23,42,.85);
  backdrop-filter:blur(14px);
  padding:10px;
  border-radius:18px;
  z-index:20;
}
.nav button{
  border:none;
  padding:12px 16px;
  border-radius:14px;
  background:#0f172a;
  color:#fff;
  font-weight:600;
}
.nav button.active{
  background:#00c2a8;
}

/* FLOATING */
.wa{
  position:fixed;
  right:20px;
  bottom:90px;
  width:56px;
  height:56px;
  border-radius:50%;
  background:#25D366;
  color:#fff;
  font-size:26px;
  display:flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
  z-index:30;
}

.full{
  position:fixed;
  right:20px;
  bottom:20px;
  width:56px;
  height:56px;
  border-radius:50%;
  background:#0f172a;
  color:#fff;
  font-size:22px;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:30;
}
</style>

<script>
/* ===== UNIT FROM URL ===== */
const params = new URLSearchParams(window.location.search)
const unit = params.get('unit') || 'type67'

/* ===== SCENE MAP ===== */
const UNITS = {
  type67:{
    living:'type67/living.jpg',
    bedroom:'type67/bedroom.jpg',
    kitchen:'type67/kitchen.jpg'
  },
  type80:{
    living:'type80/living.jpg',
    bedroom:'type80/bedroom.jpg',
    kitchen:'type80/kitchen.jpg'
  }
}

let current = 'living'
let controlMode = 'touch'

function setScene(room){
  current = room
  document.getElementById('scene')
    .setAttribute('src','assets/sample/'+UNITS[unit][room])

  document.querySelectorAll('.nav button')
    .forEach(b=>b.classList.remove('active'))
  document.getElementById(room).classList.add('active')
}

/* ===== FULLSCREEN ===== */
function fullscreen(){
  const el = document.documentElement
  if(!document.fullscreenElement){
    el.requestFullscreen?.() ||
    el.webkitRequestFullscreen?.()
  }else{
    document.exitFullscreen?.() ||
    document.webkitExitFullscreen?.()
  }
}

/* ===== CONTROL MODE ===== */
function setControl(mode){
  const cam = document.getElementById('cam')

  if(mode === 'gyro'){
    cam.setAttribute('look-controls','enabled:false')
    cam.setAttribute('device-orientation-controls','enabled:true')
  }else{
    cam.setAttribute('device-orientation-controls','enabled:false')
    cam.setAttribute('look-controls','touchEnabled:true; mouseEnabled:true')
  }

  controlMode = mode
}

/* ===== BACK ===== */
function backHome(){
  window.location.href = 'index.html'
}
</script>
</head>

<body>

<div class="info">
  <strong>Pamles Park</strong><br>
  <small>Virtual Tour â€“ TYPE <?=unit?></small>
</div>

<!-- TOP BAR -->
<div class="topbar">
  <button onclick="backHome()">â¬… Menu</button>
  <button onclick="setControl('touch')">âœ‹ Sentuh</button>
  <button onclick="setControl('gyro')">ðŸ“± Gerak HP</button>
</div>

<a class="wa" href="https://wa.me/6281802168184" target="_blank">ðŸ’¬</a>
<div class="full" onclick="fullscreen()">â›¶</div>

<!-- NAV -->
<div class="nav">
  <button id="living" class="active" onclick="setScene('living')">Living</button>
  <button id="bedroom" onclick="setScene('bedroom')">Kamar</button>
  <button id="kitchen" onclick="setScene('kitchen')">Dapur</button>
</div>

<!-- SCENE -->
<a-scene embedded>
  <a-sky id="scene"
    src="assets/sample/type67/living.jpg"
    rotation="0 -90 0"></a-sky>

  <a-camera id="cam"
    look-controls="touchEnabled:true; mouseEnabled:true"
    wasd-controls-enabled="false">
    <a-cursor></a-cursor>
  </a-camera>
</a-scene>

<script>
setScene(current)
</script>

</body>
</html>
